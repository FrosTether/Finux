main.py
import time
from kivy.app import App
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.label import Label
from kivy.uix.button import Button
from kivy.uix.progressbar import ProgressBar
from kivy.clock import Clock
from kivy.core.window import Window

# INDUSTRIAL THEME COLORS
COLOR_BG = (0.1, 0.1, 0.15, 1)    # Dark Slate
COLOR_RED = (1, 0.2, 0.2, 1)      # Unlocked/Danger
COLOR_CYAN = (0.22, 0.74, 1, 1)   # Locked/Frost
COLOR_GRAY = (0.3, 0.3, 0.3, 1)   # Metal

class FrostnerLockApp(App):
    def build(self):
        self.title = "Frostner Protocol: Mechanism Control"
        Window.clearcolor = COLOR_BG
        
        layout = BoxLayout(orientation='vertical', padding=40, spacing=30)
        
        # 1. HEADER
        self.header = Label(
            text="[b]FROSTNER MECHANISM[/b]\nSTATUS: UNLOCKED", 
            markup=True, 
            font_size='28sp', 
            color=COLOR_RED
        )
        layout.add_widget(self.header)
        
        # 2. THE LOCK VISUALIZATION (ASCII ART STYLE)
        self.lock_visual = Label(
            text="[  UNLOCKED  ]", 
            font_size='40sp', 
            font_name='RobotoMono-Regular', # Monospaced for alignment
            color=COLOR_RED
        )
        layout.add_widget(self.lock_visual)
        
        # 3. INFO PANEL
        self.info_label = Label(
            text="TARGET: 25,000,000.31 FSZT\nCLIFF: FEB 2028\nAUTHORITY: 0x3e1C...F39B",
            font_size='16sp',
            color=(0.7, 0.7, 0.7, 1)
        )
        layout.add_widget(self.info_label)

        # 4. PROGRESS BAR (HYDRAULICS)
        self.progress = ProgressBar(max=100, value=0, size_hint=(1, 0.1))
        layout.add_widget(self.progress)
        
        # 5. ACTIVATION BUTTON
        self.btn_engage = Button(
            text="ENGAGE LOCKING SEQUENCE", 
            size_hint=(1, 0.25), 
            background_color=COLOR_RED,
            font_size='18sp',
            bold=True
        )
        self.btn_engage.bind(on_press=self.start_locking_sequence)
        layout.add_widget(self.btn_engage)
        
        return layout

    def start_locking_sequence(self, instance):
        self.btn_engage.disabled = True
        self.btn_engage.text = "HYDRAULICS ENGAGED..."
        self.progress.value = 0
        # Start the animation loop
        Clock.schedule_interval(self.update_lock_animation, 0.05)

    def update_lock_animation(self, dt):
        if self.progress.value < 100:
            self.progress.value += 1
            
            # Mechanical Text Animation
            if self.progress.value < 30:
                self.lock_visual.text = "[  >>      <<  ]"
            elif self.progress.value < 60:
                self.lock_visual.text = "[  >>>>  <<<<  ]"
            elif self.progress.value < 90:
                self.lock_visual.text = "[  >>>||<<<  ]"
                self.header.color = (1, 1, 0, 1) # Turning Yellow
                self.header.text = "[b]FROSTNER MECHANISM[/b]\nSTATUS: SEALING..."
            
        else:
            # SEQUENCE COMPLETE
            self.lock_visual.text = "[  LOCKED  ]"
            self.lock_visual.color = COLOR_CYAN
            
            self.header.text = "[b]FROSTNER MECHANISM[/b]\nSTATUS: SECURE (2028)"
            self.header.color = COLOR_CYAN
            
            self.btn_engage.text = "VESTING ACTIVE // KEYS DESTROYED"
            self.btn_engage.background_color = COLOR_CYAN
            
            # Stop the loop
            return False 

if __name__ == '__main__':
    FrostnerLockApp().run()
