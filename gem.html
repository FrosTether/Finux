<!DOCTYPE html>
<html lang="en">
<head>
<title>FrostGems | PV Match</title>
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,maximum-scale=1,viewport-fit=cover">
<meta charset="UTF-8">
<style>
:root{--bg:#020202;--g:#FFD700;--gd:#B8860b;--f:#0a0a0a;--p:#d500f9;--c:#0ff;--sb:env(safe-area-inset-bottom,20px)}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;user-select:none;touch-action:none}
body{background:var(--bg);color:var(--g);font-family:'Courier New',monospace;height:100vh;overflow:hidden;display:flex;flex-direction:column;align-items:center}
.h{width:100%;background:#000;border-bottom:2px solid var(--c);padding:8px 15px;display:flex;justify-content:space-between;font-size:.6rem;z-index:50}
.d{width:96%;background:#0a0a0a;border:2px solid var(--gd);border-radius:8px;margin:8px 0;padding:10px;box-shadow:0 0 15px rgba(255,215,0,.15)}
#grid{display:grid;grid-template-columns:repeat(9,1fr);gap:2px;width:min(98vw, 55vh);height:min(98vw, 55vh);margin:auto;background:#222;border:4px solid var(--gd);padding:4px;border-radius:8px;margin-top:10px}
.cell{background:var(--f);border-radius:4px;display:flex;justify-content:center;align-items:center;font-size:1.6rem;cursor:pointer;transition:0.2s}
.sel{border:2px solid var(--p);transform:scale(0.85);box-shadow:0 0 15px var(--p)}
.mat{background:linear-gradient(135deg,var(--g),#f80)!important;animation:pop 0.4s forwards}
@keyframes pop{0%{transform:scale(1)}50%{transform:scale(1.2);opacity:1}100%{transform:scale(0);opacity:0}}
.ba{width:100%;background:linear-gradient(180deg,var(--c),#008b8b);color:#000;border:1px solid #fff;padding:10px;border-radius:20px;font-size:.7rem;font-weight:900;}
</style>
</head>
<body id="body">
<div class="h"><div>‚õìÔ∏è FrostGems | PV Feather</div><div style="color:var(--c)">BASE: 0x9b60...1A8E</div></div>
<div class="d">
<button id="lb" class="ba" onclick="tL()">üü¢ MINING ACTIVE</button>
</div>
<div id="grid"></div>
<script>
const GEMS=['‚ùÑÔ∏è','‚ö°','üÖ∞Ô∏è','üÜî','üßä','üü£'];
let grid=[], selected=null, ENG=false, A$={c:null,hum:null,e:null};
const FEA_CONTRACT = "0x9b605a1fd28331d9cfec4cbc0a39b67e8a151a8e";

function tL(){if(!A$.c)A$.c=new(window.AudioContext||window.webkitAudioContext)();const b=document.getElementById('lb');if(ENG){ENG=false;if(A$.hum){A$.hum.stop();A$.hum=null}if(A$.e){A$.e.stop();A$.e=null}b.innerText="ü´∞ IGNITE ENGINE";b.style.background="linear-gradient(180deg,#b8860b,#8b6508)";}else{ENG=true;const hO=A$.c.createOscillator(),hG=A$.c.createGain();hO.type='sine';hO.frequency.value=7.83;hG.gain.value=0.02;hO.connect(hG).connect(A$.c.destination);hO.start();A$.hum=hO;b.innerText="üü¢ MINING ACTIVE";b.style.background="linear-gradient(180deg,var(--c),#008b8b)";}}
async function init(){const g=document.getElementById('grid');g.innerHTML='';grid=[];for(let i=0;i<81;i++){let d=document.createElement('div');d.className='cell';d.onclick=()=>click(i);grid.push({type:Math.floor(Math.random()*GEMS.length),el:d});g.appendChild(d)}render();}
function render(){grid.forEach(c=>{c.el.innerText=GEMS[c.type];c.el.style.color=(c.type===5)?'var(--p)':'white'})}
function click(i){if(selected===null){selected=i;grid[i].el.classList.add('sel')}else if(selected===i){selected=null;grid[i].el.classList.remove('sel')}else{let a=selected,b=i;selected=null;grid[a].el.classList.remove('sel');if(Math.abs(a%9-b%9)+Math.abs(Math.floor(a/9)-Math.floor(b/9))===1)swap(a,b)}}
async function swap(a,b){let t=grid[a].type;grid[a].type=grid[b].type;grid[b].type=t;render();if(!await resolve()){t=grid[a].type;grid[a].type=grid[b].type;grid[b].type=t;render();}}
async function resolve(){let m=new Set();for(let r=0;r<9;r++)for(let c=0;c<7;c++){let i=r*9+c,t=grid[i].type;if(t!==-1&&grid[i+1].type===t&&grid[i+2].type===t){m.add(i);m.add(i+1);m.add(i+2)}}for(let c=0;c<9;c++)for(let r=0;r<7;r++){let i=r*9+c,t=grid[i].type;if(t!==-1&&grid[i+9].type===t&&grid[i+18].type===t){m.add(i);m.add(i+9);m.add(i+18)}}if(m.size>0){m.forEach(i=>{grid[i].el.classList.add('mat')});await new Promise(r=>setTimeout(r,300));m.forEach(i=>{grid[i].type=-1;grid[i].el.classList.remove('mat')});drop();await resolve();return true}return false}
function drop(){for(let c=0;c<9;c++){let eY=8;for(let r=8;r>=0;r--)if(grid[r*9+c].type!==-1){let t=grid[r*9+c].type;grid[r*9+c].type=-1;grid[eY*9+c].type=t;eY--}for(let r=eY;r>=0;r--)grid[r*9+c].type=Math.floor(Math.random()*GEMS.length)}render()}
init();
</script>
</body>
</html>
