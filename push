import os
import subprocess
import sys

def push_zero_kelvin():
    print("❄️  INITIATING ZERO-KELVIN UPLINK...")
    
    # 1. Define the target file
    contract_path = os.path.join("contracts", "FrostEther.sol")
    
    # 2. Check if the file exists
    if not os.path.exists(contract_path):
        print(f"   [!] Error: Could not find {contract_path}")
        print("   (Make sure you saved the Solidity code I gave you!)")
        return

    # 3. Git Execution Sequence
    commands = [
        ["git", "add", contract_path],
        ["git", "commit", "-m", "Update: Zero-Kelvin Gas Optimization (v1.0)"],
        ["git", "push", "origin", "main"]
    ]

    print(f"   [+] Target: {contract_path}")
    print(f"   [+] Remote: FrosTether/Finux")
    
    for cmd in commands:
        try:
            # Run the command and capture output
            result = subprocess.run(cmd, check=True, text=True, capture_output=True)
            print(f"   [OK] {' '.join(cmd)}")
        except subprocess.CalledProcessError as e:
            print(f"   [!] Git Error: {e.stderr.strip()}")
            # If commit fails (e.g., nothing to commit), we continue to push anyway
            if "nothing to commit" in e.stderr:
                print("   (No changes detected - File is already up to date)")
            else:
                return

    print("\n✅ CONTRACT DEPLOYMENT COMPLETE.")
    print("   The optimized logic is now live on GitHub.")

if __name__ == "__main__":
    push_zero_kelvin()
